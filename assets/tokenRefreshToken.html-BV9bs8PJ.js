import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,a,o as n}from"./app-BmGZycR1.js";const l="/assets/img-RqlyOIeW.png",t={};function r(h,e){return n(),i("div",null,[...e[0]||(e[0]=[a('<h1 id="åŒtokené‰´æƒæœºåˆ¶è¯¦è§£" tabindex="-1"><a class="header-anchor" href="#åŒtokené‰´æƒæœºåˆ¶è¯¦è§£"><span>åŒTokené‰´æƒæœºåˆ¶è¯¦è§£</span></a></h1><p>åœ¨ç°ä»£ Web é¡¹ç›®ä¸­ï¼Œ<strong>Token é‰´æƒæœºåˆ¶</strong> å·²ç»é€æ¸å–ä»£äº†ä¼ ç»Ÿçš„ Session è®¤è¯æ–¹å¼ã€‚<br> æœ¬æ–‡å°†å®Œæ•´ä»‹ç»ä¸€å¥—åŸºäº <strong>Access Token + Refresh Token</strong> çš„ç™»å½•é‰´æƒä½“ç³»ï¼Œ<br> åŒ…æ‹¬å‰ç«¯ä¸åç«¯çš„å­˜å‚¨ã€äº¤äº’ã€åˆ·æ–°é€»è¾‘ï¼Œä»¥åŠå®‰å…¨è®¾è®¡æ€è·¯ã€‚</p><hr><h2 id="ğŸ§©-ä¸€ã€æ•´ä½“æ€è·¯æ¦‚è§ˆ" tabindex="-1"><a class="header-anchor" href="#ğŸ§©-ä¸€ã€æ•´ä½“æ€è·¯æ¦‚è§ˆ"><span>ğŸ§© ä¸€ã€æ•´ä½“æ€è·¯æ¦‚è§ˆ</span></a></h2><blockquote><p>æ ¸å¿ƒæ€æƒ³ï¼š<br> ä½¿ç”¨çŸ­æœŸå‡­è¯ <code>accessToken</code> è®¿é—®æ¥å£ï¼Œä½¿ç”¨é•¿æœŸå‡­è¯ <code>refreshToken</code> ç»­ç­¾æ–°çš„ accessTokenã€‚</p></blockquote><ul><li><code>accessToken</code>ï¼šè®¿é—®ä»¤ç‰Œï¼Œæœ‰æ•ˆæœŸçŸ­ï¼ˆä¾‹å¦‚ 2 å°æ—¶ï¼‰ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½æºå¸¦ã€‚</li><li><code>refreshToken</code>ï¼šåˆ·æ–°ä»¤ç‰Œï¼Œæœ‰æ•ˆæœŸé•¿ï¼ˆä¾‹å¦‚ 7 å¤©ï¼‰ï¼Œä»…åœ¨ accessToken è¿‡æœŸæ—¶ä½¿ç”¨ã€‚</li><li>åç«¯å°† refreshToken å­˜å‚¨åœ¨ Redis ä¸­ï¼Œç”¨äºæ ¡éªŒå’Œå¤±æ•ˆæ§åˆ¶ã€‚</li><li>å‰ç«¯å°† accessToken å­˜å‚¨åœ¨æµè§ˆå™¨ä¸­ï¼Œç”¨äºæ¯æ¬¡æ¥å£è®¿é—®ã€‚</li></ul><h2 id="" tabindex="-1"><a class="header-anchor" href="#"><span><img src="'+l+`" alt="alt text" loading="lazy"></span></a></h2><h2 id="ğŸšª-äºŒã€ç™»å½•é˜¶æ®µ-token-ç”Ÿæˆä¸å­˜å‚¨" tabindex="-1"><a class="header-anchor" href="#ğŸšª-äºŒã€ç™»å½•é˜¶æ®µ-token-ç”Ÿæˆä¸å­˜å‚¨"><span>ğŸšª äºŒã€ç™»å½•é˜¶æ®µï¼ˆToken ç”Ÿæˆä¸å­˜å‚¨ï¼‰</span></a></h2><h3 id="_1ï¸âƒ£-å‰ç«¯è¡Œä¸º" tabindex="-1"><a class="header-anchor" href="#_1ï¸âƒ£-å‰ç«¯è¡Œä¸º"><span>1ï¸âƒ£ å‰ç«¯è¡Œä¸º</span></a></h3><p>ç”¨æˆ·åœ¨ç™»å½•é¡µè¾“å…¥æ‰‹æœºå·å’ŒéªŒè¯ç ï¼ˆæˆ–è´¦å·å¯†ç ï¼‰ï¼Œå‘åç«¯å‘èµ·ç™»å½•è¯·æ±‚ï¼š</p><p>è¯¥è¯·æ±‚ä¸æºå¸¦ä»»ä½• Tokenã€‚</p><h3 id="_2ï¸âƒ£-åç«¯è¡Œä¸º" tabindex="-1"><a class="header-anchor" href="#_2ï¸âƒ£-åç«¯è¡Œä¸º"><span>2ï¸âƒ£ åç«¯è¡Œä¸º</span></a></h3><p>åç«¯æ ¡éªŒç™»å½•ä¿¡æ¯æˆåŠŸåï¼Œç”Ÿæˆï¼š</p><ul><li><code>accessToken</code>ï¼šæœ‰æ•ˆæœŸ 2 å°æ—¶ï¼›</li><li><code>refreshToken</code>ï¼šæœ‰æ•ˆæœŸ 7 å¤©ï¼›</li></ul><p>å¹¶æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p><ul><li>å°† refreshToken å­˜å…¥ Redisï¼š</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>key: refresh_token:{userId}</span></span>
<span class="line"><span>value: &lt;refreshToken&gt;</span></span>
<span class="line"><span>TTL: 7 days</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿”å›ç»™å‰ç«¯ï¼š</li></ul><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">  &quot;accessToken&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;xxxxxx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">  &quot;refreshToken&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;yyyyyy&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3ï¸âƒ£-å‰ç«¯å­˜å‚¨" tabindex="-1"><a class="header-anchor" href="#_3ï¸âƒ£-å‰ç«¯å­˜å‚¨"><span>3ï¸âƒ£ å‰ç«¯å­˜å‚¨</span></a></h3><p>å‰ç«¯æ‹¿åˆ° Token åï¼š</p><ul><li>å°† <strong>accessToken</strong> åŠ å¯†å­˜å…¥ <code>localStorage</code> æˆ– <code>sessionStorage</code>ï¼›</li><li>å°† <strong>refreshToken</strong> ä¸´æ—¶å­˜å‚¨åœ¨å†…å­˜æˆ–ä¼šè¯å­˜å‚¨ä¸­ï¼›</li><li>ä¹‹åæ¯æ¬¡è¯·æ±‚æ¥å£æ—¶è‡ªåŠ¨æºå¸¦ï¼š</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>Authorization: Bearer &lt;accessToken&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h2 id="ğŸŒ-ä¸‰ã€æ¥å£è¯·æ±‚é˜¶æ®µ-æ­£å¸¸è®¿é—®" tabindex="-1"><a class="header-anchor" href="#ğŸŒ-ä¸‰ã€æ¥å£è¯·æ±‚é˜¶æ®µ-æ­£å¸¸è®¿é—®"><span>ğŸŒ ä¸‰ã€æ¥å£è¯·æ±‚é˜¶æ®µï¼ˆæ­£å¸¸è®¿é—®ï¼‰</span></a></h2><h3 id="_1ï¸âƒ£-å‰ç«¯è¡Œä¸º-1" tabindex="-1"><a class="header-anchor" href="#_1ï¸âƒ£-å‰ç«¯è¡Œä¸º-1"><span>1ï¸âƒ£ å‰ç«¯è¡Œä¸º</span></a></h3><p>ç”¨æˆ·åœ¨æ“ä½œé¡µé¢æ—¶å‘èµ·å„ç§ API è¯·æ±‚ï¼Œ<br> è¯·æ±‚å¤´ä¸­ä¼šè‡ªåŠ¨é™„å¸¦ accessTokenï¼š</p><h3 id="_2ï¸âƒ£-åç«¯è¡Œä¸º-1" tabindex="-1"><a class="header-anchor" href="#_2ï¸âƒ£-åç«¯è¡Œä¸º-1"><span>2ï¸âƒ£ åç«¯è¡Œä¸º</span></a></h3><p>åç«¯æ‹¦æˆªè¯·æ±‚ï¼ŒéªŒè¯ accessTokenï¼š</p><table><thead><tr><th>æƒ…å†µ</th><th>å¤„ç†æ–¹å¼</th></tr></thead><tbody><tr><td>Token æœ‰æ•ˆ</td><td>æ”¾è¡Œè¯·æ±‚</td></tr><tr><td>Token æ— æ•ˆï¼ˆç­¾åé”™è¯¯ï¼‰</td><td>è¿”å› <code>401 Unauthorized</code></td></tr><tr><td>Token è¿‡æœŸ</td><td>è¿”å›ç‰¹å®šé”™è¯¯ç ï¼Œå¦‚ï¼š<code>40101</code></td></tr></tbody></table><hr><h2 id="ğŸ”-å››ã€token-åˆ·æ–°é˜¶æ®µ-accesstoken-è¿‡æœŸ" tabindex="-1"><a class="header-anchor" href="#ğŸ”-å››ã€token-åˆ·æ–°é˜¶æ®µ-accesstoken-è¿‡æœŸ"><span>ğŸ” å››ã€Token åˆ·æ–°é˜¶æ®µï¼ˆaccessToken è¿‡æœŸï¼‰</span></a></h2><p>å½“ accessToken è¿‡æœŸæ—¶ï¼Œç³»ç»Ÿä¸è¦æ±‚ç”¨æˆ·é‡æ–°ç™»å½•ã€‚<br> æµç¨‹å¦‚ä¸‹ï¼š</p><h3 id="_1ï¸âƒ£-å‰ç«¯æ£€æµ‹" tabindex="-1"><a class="header-anchor" href="#_1ï¸âƒ£-å‰ç«¯æ£€æµ‹"><span>1ï¸âƒ£ å‰ç«¯æ£€æµ‹</span></a></h3><p>åœ¨ Axios å“åº”æ‹¦æˆªå™¨ä¸­æ£€æµ‹åˆ°å“åº”çŠ¶æ€ä¸º <code>40101</code>ï¼ˆaccessToken è¿‡æœŸï¼‰ï¼Œ<br> åˆ™è‡ªåŠ¨è°ƒç”¨åˆ·æ–°æ¥å£ï¼š</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">POST</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> /</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">api</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">refresh</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  &quot;refreshToken&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;yyyyyy&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2ï¸âƒ£-åç«¯å¤„ç†" tabindex="-1"><a class="header-anchor" href="#_2ï¸âƒ£-åç«¯å¤„ç†"><span>2ï¸âƒ£ åç«¯å¤„ç†</span></a></h3><p>åç«¯æ¥æ”¶åˆ° refreshToken åï¼š</p><ol><li>ä» Redis ä¸­æŸ¥æ‰¾ <code>refresh_token:{userId}</code>ï¼›</li><li>è‹¥å­˜åœ¨ä¸”åŒ¹é…ï¼Œåˆ™è¯´æ˜ refreshToken æœ‰æ•ˆï¼›</li><li>ç”Ÿæˆæ–°çš„ accessTokenï¼›</li><li>æ›´æ–° Redis ä¸­çš„å­˜å‚¨ï¼ˆå¯é€‰æ‹©åˆ·æ–° refreshToken ä¸€å¹¶æ›´æ–°ï¼‰ï¼›</li><li>è¿”å›æ–°çš„ accessToken ç»™å‰ç«¯ã€‚</li></ol><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">  &quot;accessToken&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;new-access-token&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">  &quot;refreshToken&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;new-refresh-token&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3ï¸âƒ£-å‰ç«¯æ›´æ–°" tabindex="-1"><a class="header-anchor" href="#_3ï¸âƒ£-å‰ç«¯æ›´æ–°"><span>3ï¸âƒ£ å‰ç«¯æ›´æ–°</span></a></h3><p>å‰ç«¯æ‹¿åˆ°æ–°çš„ accessToken åï¼š</p><ul><li>æ›´æ–°æœ¬åœ°å­˜å‚¨ï¼›</li><li>é‡æ–°å‘èµ·åŸæœ¬å¤±è´¥çš„è¯·æ±‚ï¼›</li><li>ç”¨æˆ·ä½“éªŒæ— æ„ŸçŸ¥ã€‚</li></ul><hr><h2 id="âš ï¸-äº”ã€åˆ·æ–°å¤±è´¥-refreshtoken-è¿‡æœŸ" tabindex="-1"><a class="header-anchor" href="#âš ï¸-äº”ã€åˆ·æ–°å¤±è´¥-refreshtoken-è¿‡æœŸ"><span>âš ï¸ äº”ã€åˆ·æ–°å¤±è´¥ï¼ˆrefreshToken è¿‡æœŸï¼‰</span></a></h2><p>å½“ refreshToken ä¹Ÿè¿‡æœŸæ—¶ï¼Œç³»ç»Ÿä¸å†å…è®¸è‡ªåŠ¨ç»­æœŸã€‚</p><h3 id="_1ï¸âƒ£-åç«¯è¡Œä¸º" tabindex="-1"><a class="header-anchor" href="#_1ï¸âƒ£-åç«¯è¡Œä¸º"><span>1ï¸âƒ£ åç«¯è¡Œä¸º</span></a></h3><p>åç«¯æ ¡éªŒ Redis ä¸­çš„ refreshToken æ—¶å‘ç°ï¼š</p><ul><li>key ä¸å­˜åœ¨ï¼›</li><li>æˆ–è€…å·²è¶…å‡ºæœ‰æ•ˆæœŸï¼›</li><li>æˆ–è€…å€¼ä¸åŒ¹é…ï¼ˆè¢«å¼ºåˆ¶ä¸‹çº¿ï¼‰ã€‚</li></ul><p>æ­¤æ—¶è¿”å›ï¼š</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">  &quot;code&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">401</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">  &quot;msg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;refreshTokenå·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2ï¸âƒ£-å‰ç«¯è¡Œä¸º" tabindex="-1"><a class="header-anchor" href="#_2ï¸âƒ£-å‰ç«¯è¡Œä¸º"><span>2ï¸âƒ£ å‰ç«¯è¡Œä¸º</span></a></h3><p>å“åº”æ‹¦æˆªå™¨æ•è·åˆ°è¯¥çŠ¶æ€åï¼š</p><ul><li>æ¸…ç©ºæœ¬åœ° Tokenï¼›</li><li>è·³è½¬åˆ°ç™»å½•é¡µï¼›</li><li>æç¤ºç”¨æˆ·é‡æ–°ç™»å½•ã€‚</li></ul><hr><h2 id="ğŸšª-å…­ã€é€€å‡ºç™»å½•æˆ–å¼ºåˆ¶ä¸‹çº¿" tabindex="-1"><a class="header-anchor" href="#ğŸšª-å…­ã€é€€å‡ºç™»å½•æˆ–å¼ºåˆ¶ä¸‹çº¿"><span>ğŸšª å…­ã€é€€å‡ºç™»å½•æˆ–å¼ºåˆ¶ä¸‹çº¿</span></a></h2><h3 id="å‰ç«¯" tabindex="-1"><a class="header-anchor" href="#å‰ç«¯"><span>å‰ç«¯ï¼š</span></a></h3><ul><li>è°ƒç”¨ç™»å‡ºæ¥å£ <code>/logout</code>ï¼›</li><li>æ¸…ç©ºæœ¬åœ°å­˜å‚¨ï¼ˆaccessTokenã€refreshTokenï¼‰ã€‚</li></ul><h3 id="åç«¯" tabindex="-1"><a class="header-anchor" href="#åç«¯"><span>åç«¯ï¼š</span></a></h3><ul><li>åˆ é™¤ Redis ä¸­å¯¹åº”çš„ refreshTokenï¼›</li><li>è‹¥ç”¨æˆ·å°è¯•æºå¸¦æ—§çš„ accessToken è°ƒç”¨æ¥å£ï¼Œä¼šç›´æ¥é‰´æƒå¤±è´¥ã€‚</li></ul><hr><h2 id="ğŸ§ -ä¸ƒã€token-ç”Ÿå‘½å‘¨æœŸç¤ºæ„å›¾" tabindex="-1"><a class="header-anchor" href="#ğŸ§ -ä¸ƒã€token-ç”Ÿå‘½å‘¨æœŸç¤ºæ„å›¾"><span>ğŸ§  ä¸ƒã€Token ç”Ÿå‘½å‘¨æœŸç¤ºæ„å›¾</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>[ ç™»å½• ]</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>ç”Ÿæˆ accessToken(2h) &amp; refreshToken(7d)</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>[ æ­£å¸¸è¯·æ±‚ - å¸¦ accessToken ]</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>(2h åˆ°æœŸ)</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>[ è°ƒç”¨ refreshToken åˆ·æ–° Token ]</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>â†’ refreshToken æœ‰æ•ˆ â†’ è·å–æ–° accessToken â†’ ç»§ç»­ä½¿ç”¨</span></span>
<span class="line"><span>â†’ refreshToken å¤±æ•ˆ â†’ è¿”å›ç™»å½•é¡µé‡æ–°ç™»å½•</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="ğŸ”’-å…«ã€å®‰å…¨å»ºè®®" tabindex="-1"><a class="header-anchor" href="#ğŸ”’-å…«ã€å®‰å…¨å»ºè®®"><span>ğŸ”’ å…«ã€å®‰å…¨å»ºè®®</span></a></h2><table><thead><tr><th>å»ºè®®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>âœ… HTTPS</td><td>æ‰€æœ‰è¯·æ±‚å¿…é¡»èµ° HTTPS</td></tr><tr><td>âœ… refreshToken å­˜å‚¨</td><td>å»ºè®®ä»…å­˜äºå†…å­˜æˆ– Sessionï¼Œè€Œé localStorage</td></tr><tr><td>âœ… ç™»å‡ºæ—¶æ¸…ç†</td><td>ç¡®ä¿ Redis å’Œå‰ç«¯åŒæ—¶æ¸…ç©º Token</td></tr><tr><td>âœ… Token ç»‘å®š</td><td>å¯åœ¨ Token ä¸­ç»‘å®š userIdã€è®¾å¤‡æ ‡è¯†ã€IP ç­‰ä¿¡æ¯</td></tr><tr><td>âœ… è½®æ¢ç­–ç•¥</td><td>æ¯æ¬¡åˆ·æ–°éƒ½ç”Ÿæˆæ–°çš„ refreshTokenï¼Œæå‡å®‰å…¨æ€§</td></tr></tbody></table><hr><h2 id="ğŸ§¾-ä¹ã€é…ç½®å‚æ•°æ¨è" tabindex="-1"><a class="header-anchor" href="#ğŸ§¾-ä¹ã€é…ç½®å‚æ•°æ¨è"><span>ğŸ§¾ ä¹ã€é…ç½®å‚æ•°æ¨è</span></a></h2><table><thead><tr><th>é¡¹ç›®</th><th>è¯´æ˜</th><th>å»ºè®®å€¼</th></tr></thead><tbody><tr><td>Access Token æœ‰æ•ˆæœŸ</td><td>ç”¨æˆ·æ­£å¸¸ä½¿ç”¨çš„æ—¶é—´æ®µ</td><td>2 å°æ—¶</td></tr><tr><td>Refresh Token æœ‰æ•ˆæœŸ</td><td>ç”¨äºç»­ç­¾çš„æœ€é•¿æ—¶é—´</td><td>7 å¤©</td></tr><tr><td>Redis Key å‘½å</td><td>é˜²æ­¢å†²çª</td><td><code>refresh_token:{userId}</code></td></tr><tr><td>Token å­˜å‚¨ä½ç½®</td><td>å‰ç«¯</td><td>localStorageï¼ˆåŠ å¯†åï¼‰</td></tr><tr><td>Token å­˜å‚¨ä½ç½®</td><td>åç«¯</td><td>Redisï¼ˆå¸¦ TTLï¼‰</td></tr></tbody></table><hr><h2 id="ğŸ§­-åã€æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#ğŸ§­-åã€æ€»ç»“"><span>ğŸ§­ åã€æ€»ç»“</span></a></h2><p>æ•´ä¸ª Token é‰´æƒä½“ç³»éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š</p><blockquote><p>çŸ­æœŸå‡­è¯ï¼ˆAccess Tokenï¼‰è´Ÿè´£è®¿é—®ï¼Œ<br> é•¿æœŸå‡­è¯ï¼ˆRefresh Tokenï¼‰è´Ÿè´£ç»­å‘½ã€‚</p><p>åç«¯ç”¨ Redis æ§åˆ¶åˆ·æ–°æƒé™ï¼Œ<br> å‰ç«¯ç”¨æ‹¦æˆªå™¨å®ç°è‡ªåŠ¨ç»­ç­¾ã€‚</p><p>å½“ Refresh Token è¿‡æœŸæˆ–è¢«åˆ é™¤æ—¶ï¼Œ<br> ç”¨æˆ·å¿…é¡»é‡æ–°ç™»å½•ï¼Œå®‰å…¨ä¸ä½“éªŒå…¼å¾—ã€‚</p></blockquote><hr>`,74)])])}const c=s(t,[["render",r],["__file","tokenRefreshToken.html.vue"]]),k=JSON.parse(`{"path":"/Database/NoSQL/tokenRefreshToken.html","title":"åŒTokené‰´æƒæœºåˆ¶è¯¦è§£","lang":"zh-CN","frontmatter":{"order":3,"date":"2025-10-16T00:00:00.000Z","category":["Redis"],"description":"åŒTokené‰´æƒæœºåˆ¶è¯¦è§£ åœ¨ç°ä»£ Web é¡¹ç›®ä¸­ï¼ŒToken é‰´æƒæœºåˆ¶ å·²ç»é€æ¸å–ä»£äº†ä¼ ç»Ÿçš„ Session è®¤è¯æ–¹å¼ã€‚ æœ¬æ–‡å°†å®Œæ•´ä»‹ç»ä¸€å¥—åŸºäº Access Token + Refresh Token çš„ç™»å½•é‰´æƒä½“ç³»ï¼Œ åŒ…æ‹¬å‰ç«¯ä¸åç«¯çš„å­˜å‚¨ã€äº¤äº’ã€åˆ·æ–°é€»è¾‘ï¼Œä»¥åŠå®‰å…¨è®¾è®¡æ€è·¯ã€‚ ğŸ§© ä¸€ã€æ•´ä½“æ€è·¯æ¦‚è§ˆ æ ¸å¿ƒæ€æƒ³ï¼š ä½¿ç”¨çŸ­æœŸå‡­è¯ accessToken ...","head":[["meta",{"property":"og:url","content":"https://zxroo.top/Database/NoSQL/tokenRefreshToken.html"}],["meta",{"property":"og:site_name","content":"Zxr's Blog"}],["meta",{"property":"og:title","content":"åŒTokené‰´æƒæœºåˆ¶è¯¦è§£"}],["meta",{"property":"og:description","content":"åŒTokené‰´æƒæœºåˆ¶è¯¦è§£ åœ¨ç°ä»£ Web é¡¹ç›®ä¸­ï¼ŒToken é‰´æƒæœºåˆ¶ å·²ç»é€æ¸å–ä»£äº†ä¼ ç»Ÿçš„ Session è®¤è¯æ–¹å¼ã€‚ æœ¬æ–‡å°†å®Œæ•´ä»‹ç»ä¸€å¥—åŸºäº Access Token + Refresh Token çš„ç™»å½•é‰´æƒä½“ç³»ï¼Œ åŒ…æ‹¬å‰ç«¯ä¸åç«¯çš„å­˜å‚¨ã€äº¤äº’ã€åˆ·æ–°é€»è¾‘ï¼Œä»¥åŠå®‰å…¨è®¾è®¡æ€è·¯ã€‚ ğŸ§© ä¸€ã€æ•´ä½“æ€è·¯æ¦‚è§ˆ æ ¸å¿ƒæ€æƒ³ï¼š ä½¿ç”¨çŸ­æœŸå‡­è¯ accessToken ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2026-01-04T03:42:06.000Z"}],["meta",{"property":"article:published_time","content":"2025-10-16T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2026-01-04T03:42:06.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"åŒTokené‰´æƒæœºåˆ¶è¯¦è§£\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2025-10-16T00:00:00.000Z\\",\\"dateModified\\":\\"2026-01-04T03:42:06.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"ğŸ§© ä¸€ã€æ•´ä½“æ€è·¯æ¦‚è§ˆ","slug":"ğŸ§©-ä¸€ã€æ•´ä½“æ€è·¯æ¦‚è§ˆ","link":"#ğŸ§©-ä¸€ã€æ•´ä½“æ€è·¯æ¦‚è§ˆ","children":[]},{"level":2,"title":"","slug":"","link":"#","children":[]},{"level":2,"title":"ğŸšª äºŒã€ç™»å½•é˜¶æ®µï¼ˆToken ç”Ÿæˆä¸å­˜å‚¨ï¼‰","slug":"ğŸšª-äºŒã€ç™»å½•é˜¶æ®µ-token-ç”Ÿæˆä¸å­˜å‚¨","link":"#ğŸšª-äºŒã€ç™»å½•é˜¶æ®µ-token-ç”Ÿæˆä¸å­˜å‚¨","children":[{"level":3,"title":"1ï¸âƒ£ å‰ç«¯è¡Œä¸º","slug":"_1ï¸âƒ£-å‰ç«¯è¡Œä¸º","link":"#_1ï¸âƒ£-å‰ç«¯è¡Œä¸º","children":[]},{"level":3,"title":"2ï¸âƒ£ åç«¯è¡Œä¸º","slug":"_2ï¸âƒ£-åç«¯è¡Œä¸º","link":"#_2ï¸âƒ£-åç«¯è¡Œä¸º","children":[]},{"level":3,"title":"3ï¸âƒ£ å‰ç«¯å­˜å‚¨","slug":"_3ï¸âƒ£-å‰ç«¯å­˜å‚¨","link":"#_3ï¸âƒ£-å‰ç«¯å­˜å‚¨","children":[]}]},{"level":2,"title":"ğŸŒ ä¸‰ã€æ¥å£è¯·æ±‚é˜¶æ®µï¼ˆæ­£å¸¸è®¿é—®ï¼‰","slug":"ğŸŒ-ä¸‰ã€æ¥å£è¯·æ±‚é˜¶æ®µ-æ­£å¸¸è®¿é—®","link":"#ğŸŒ-ä¸‰ã€æ¥å£è¯·æ±‚é˜¶æ®µ-æ­£å¸¸è®¿é—®","children":[{"level":3,"title":"1ï¸âƒ£ å‰ç«¯è¡Œä¸º","slug":"_1ï¸âƒ£-å‰ç«¯è¡Œä¸º-1","link":"#_1ï¸âƒ£-å‰ç«¯è¡Œä¸º-1","children":[]},{"level":3,"title":"2ï¸âƒ£ åç«¯è¡Œä¸º","slug":"_2ï¸âƒ£-åç«¯è¡Œä¸º-1","link":"#_2ï¸âƒ£-åç«¯è¡Œä¸º-1","children":[]}]},{"level":2,"title":"ğŸ” å››ã€Token åˆ·æ–°é˜¶æ®µï¼ˆaccessToken è¿‡æœŸï¼‰","slug":"ğŸ”-å››ã€token-åˆ·æ–°é˜¶æ®µ-accesstoken-è¿‡æœŸ","link":"#ğŸ”-å››ã€token-åˆ·æ–°é˜¶æ®µ-accesstoken-è¿‡æœŸ","children":[{"level":3,"title":"1ï¸âƒ£ å‰ç«¯æ£€æµ‹","slug":"_1ï¸âƒ£-å‰ç«¯æ£€æµ‹","link":"#_1ï¸âƒ£-å‰ç«¯æ£€æµ‹","children":[]},{"level":3,"title":"2ï¸âƒ£ åç«¯å¤„ç†","slug":"_2ï¸âƒ£-åç«¯å¤„ç†","link":"#_2ï¸âƒ£-åç«¯å¤„ç†","children":[]},{"level":3,"title":"3ï¸âƒ£ å‰ç«¯æ›´æ–°","slug":"_3ï¸âƒ£-å‰ç«¯æ›´æ–°","link":"#_3ï¸âƒ£-å‰ç«¯æ›´æ–°","children":[]}]},{"level":2,"title":"âš ï¸ äº”ã€åˆ·æ–°å¤±è´¥ï¼ˆrefreshToken è¿‡æœŸï¼‰","slug":"âš ï¸-äº”ã€åˆ·æ–°å¤±è´¥-refreshtoken-è¿‡æœŸ","link":"#âš ï¸-äº”ã€åˆ·æ–°å¤±è´¥-refreshtoken-è¿‡æœŸ","children":[{"level":3,"title":"1ï¸âƒ£ åç«¯è¡Œä¸º","slug":"_1ï¸âƒ£-åç«¯è¡Œä¸º","link":"#_1ï¸âƒ£-åç«¯è¡Œä¸º","children":[]},{"level":3,"title":"2ï¸âƒ£ å‰ç«¯è¡Œä¸º","slug":"_2ï¸âƒ£-å‰ç«¯è¡Œä¸º","link":"#_2ï¸âƒ£-å‰ç«¯è¡Œä¸º","children":[]}]},{"level":2,"title":"ğŸšª å…­ã€é€€å‡ºç™»å½•æˆ–å¼ºåˆ¶ä¸‹çº¿","slug":"ğŸšª-å…­ã€é€€å‡ºç™»å½•æˆ–å¼ºåˆ¶ä¸‹çº¿","link":"#ğŸšª-å…­ã€é€€å‡ºç™»å½•æˆ–å¼ºåˆ¶ä¸‹çº¿","children":[{"level":3,"title":"å‰ç«¯ï¼š","slug":"å‰ç«¯","link":"#å‰ç«¯","children":[]},{"level":3,"title":"åç«¯ï¼š","slug":"åç«¯","link":"#åç«¯","children":[]}]},{"level":2,"title":"ğŸ§  ä¸ƒã€Token ç”Ÿå‘½å‘¨æœŸç¤ºæ„å›¾","slug":"ğŸ§ -ä¸ƒã€token-ç”Ÿå‘½å‘¨æœŸç¤ºæ„å›¾","link":"#ğŸ§ -ä¸ƒã€token-ç”Ÿå‘½å‘¨æœŸç¤ºæ„å›¾","children":[]},{"level":2,"title":"ğŸ”’ å…«ã€å®‰å…¨å»ºè®®","slug":"ğŸ”’-å…«ã€å®‰å…¨å»ºè®®","link":"#ğŸ”’-å…«ã€å®‰å…¨å»ºè®®","children":[]},{"level":2,"title":"ğŸ§¾ ä¹ã€é…ç½®å‚æ•°æ¨è","slug":"ğŸ§¾-ä¹ã€é…ç½®å‚æ•°æ¨è","link":"#ğŸ§¾-ä¹ã€é…ç½®å‚æ•°æ¨è","children":[]},{"level":2,"title":"ğŸ§­ åã€æ€»ç»“","slug":"ğŸ§­-åã€æ€»ç»“","link":"#ğŸ§­-åã€æ€»ç»“","children":[]}],"git":{"createdTime":1760608964000,"updatedTime":1767498126000,"contributors":[{"name":"zhaoxinrong","email":"â€œzhaoxr@cwanwu.comâ€","commits":2}]},"readingTime":{"minutes":3.73,"words":1119},"filePathRelative":"Database/NoSQL/tokenRefreshToken.md","localizedDate":"2025å¹´10æœˆ16æ—¥","excerpt":"","autoDesc":true}`);export{c as comp,k as data};
