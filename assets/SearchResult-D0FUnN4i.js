import{f as X,u as K,g as O,h as ee,P as te,i as se,j as ae,k as Q,l as F,m as s,n as re,p as x,q as oe,R as q,s as le,v as ue,x as ie,y as ne,z as ce,A as G,B as M,C as me,D as he,E as ve,F as pe,G as de,H as ye,I as Ee,J as V,K as ge,L as w}from"./app-BmGZycR1.js";const Be=["/","/intro.html","/ComputerBasics/ComputerNetwork/","/ComputerBasics/ComputerNetwork/computernetword01.html","/ComputerBasics/ComputerNetwork/computernetwork02.html","/ComputerBasics/DataStructure/","/ComputerBasics/OpreatingSystem/","/Database/NoSQL/","/Database/NoSQL/tokenRefreshToken.html","/Database/SQL/","/Essays/Daily/","/Essays/Daily/ZhuQiZhen.html","/Essays/History/NanMingBeiGe.html","/Essays/History/","/Essays/History/overMing.html","/Essays/Poem/DMWC1566.html","/Essays/Poem/","/Essays/Poem/WuTi.html","/Essays/Poem/XWH.html","/Essays/Poem/YYHX.html","/Essays/Poem/ZZD.html","/Essays/Poem/mugui.html","/FrontEnd/CSS/","/FrontEnd/CSS/css01.html","/FrontEnd/CSS/css02.html","/FrontEnd/CSS/css03.html","/FrontEnd/HTML/","/FrontEnd/HTML/html01.html","/FrontEnd/HTML/html02.html","/FrontEnd/HTML/html03.html","/FrontEnd/JavaScript/","/FrontEnd/JavaScript/auto-play-audio.html","/FrontEnd/JavaScript/javascript01.html","/FrontEnd/JavaScript/javascript02.html","/FrontEnd/JavaScript/javascript03.html","/FrontEnd/JavaScript/javascript04.html","/FrontEnd/JavaScript/javascript05.html","/FrontEnd/Vue/","/FrontEnd/Vue/Shadowsocks.html","/FrontEnd/Vue/Vue-Scaffolding.html","/FrontEnd/Vue/vue-cli-cache-optimization-guide.html","/FrontEnd/Vue/vue01.html","/FrontEnd/Vue/vue02.html","/FrontEnd/Vue/vue03.html","/FrontEnd/Vue/vue04.html","/FrontEnd/Vue/vue05.html","/FrontEnd/Vue/vue06.html","/FrontEnd/Vue/vue07.html","/FrontEnd/Vue/vue2-vue3-jsencrypt-rsa.html","/FrontEnd/Vue/xml_soap.html","/Tools/Git/","/Tools/MarkDown/","/Tools/MarkDown/markdown01.html","/Tools/Resource/","/ComputerBasics/ComputerNetwork/01cn/","/ComputerBasics/ComputerNetwork/01cn/cn01.html","/ComputerBasics/ComputerNetwork/01cn/cn02.html","/ComputerBasics/ComputerNetwork/01cn/cn03.html","/ComputerBasics/DataStructure/01DS/","/ComputerBasics/DataStructure/01DS/ds01.html","/ComputerBasics/DataStructure/01DS/ds02_.html","/ComputerBasics/DataStructure/01DS/ds03.html","/ComputerBasics/DataStructure/02MO/","/ComputerBasics/DataStructure/02MO/mo01.html","/ComputerBasics/DataStructure/02MO/mo02.html","/ComputerBasics/DataStructure/02MO/mo03.html","/ComputerBasics/OpreatingSystem/OSInterview/","/ComputerBasics/OpreatingSystem/OSInterview/osi01.html","/ComputerBasics/OpreatingSystem/OSInterview/osi02.html","/ComputerBasics/OpreatingSystem/OSInterview/osi03.html","/Database/Basic/Language/","/Database/Basic/Principle/","/Database/SQL/01Basics/","/Database/SQL/01Basics/sql01.html","/Database/SQL/01Basics/sql02.html","/Database/SQL/01Basics/sql03.html","/Database/SQL/01Basics/sql04.html","/Tools/Git/01Manual/","/Tools/Git/01Manual/manual01.html","/Tools/Git/01Manual/manual02.html","/Tools/Git/01Manual/manual03.html","/Tools/Git/02DocumentNotes/","/Tools/Git/02DocumentNotes/documentnotes01.html","/Tools/Git/02DocumentNotes/documentnotes02.html","/Tools/Git/02DocumentNotes/documentnotes03.html","/Tools/Git/02DocumentNotes/documentnotes04.html","/Tools/Git/02DocumentNotes/documentnotes05.html","/Tools/Git/02DocumentNotes/documentnotes06.html","/Tools/Git/02DocumentNotes/documentnotes07.html","/Tools/Git/02DocumentNotes/documentnotes08.html","/Tools/Git/02DocumentNotes/documentnotes09.html","/Tools/Git/02DocumentNotes/documentnotes10.html","/Tools/Git/02DocumentNotes/documentnotes11.html","/Database/Basic/Principle/DBInterview/","/Database/Basic/Principle/DBInterview/dbi01.html","/Database/Basic/Principle/DBInterview/dbi02.html","/Database/Basic/Principle/DBInterview/dbi03.html","/404.html","/ComputerBasics/","/Database/","/Essays/","/FrontEnd/","/Tools/","/Database/Basic/","/category/","/category/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/","/category/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/","/category/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/","/category/redis/","/category/sql%E5%9F%BA%E7%A1%80/","/category/essays/","/category/daily/","/category/history/","/category/poem/","/category/poetry/","/category/front-end/","/category/css/","/category/html/","/category/javascript/","/category/vue/","/category/%E6%8A%80%E6%9C%AF/","/category/git/","/category/markdown/","/category/%E4%B8%AD%E9%97%B4%E4%BB%B6%E4%B8%8E%E5%85%B6%E4%BB%96%E4%B8%93%E4%B8%9A%E6%8A%80%E8%83%BD/","/category/ddl/","/category/dml/","/category/dql/","/category/%E6%95%B0%E6%8D%AE%E5%BA%93/","/tag/","/tag/%E5%8D%97%E6%98%8E/","/tag/%E5%8E%86%E5%8F%B2%E9%9A%8F%E7%AC%94/","/tag/%E6%98%8E%E6%9C%9D/","/tag/%E5%BC%A0%E5%B1%85%E6%AD%A3/","/tag/vue3/","/tag/vue2/","/tag/vue/","/tag/jsencrypt/","/tag/%E5%89%8D%E7%AB%AF%E5%8A%A0%E5%AF%86/","/tag/%E8%B5%84%E6%BA%90%E6%95%B4%E5%90%88/","/article/","/star/","/timeline/"],De="SEARCH_PRO_QUERY_HISTORY",y=V(De,[]),Se=()=>{const{queryHistoryCount:r}=w;return{enabled:r>0,queryHistory:y,addQueryHistory:u=>{y.value=Array.from(new Set([u,...y.value.slice(0,r-1)]))},removeQueryHistory:u=>{y.value=[...y.value.slice(0,u),...y.value.slice(u+1)]}}},b=r=>Be[r.id]+("anchor"in r?`#${r.anchor}`:""),Ce="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:P}=w,E=V(Ce,[]),Fe=()=>({enabled:P>0,resultHistory:E,addResultHistory:o=>{{const u={link:b(o),display:o.display};"header"in o&&(u.header=o.header),E.value=[u,...E.value.slice(0,P-1)]}},removeResultHistory:o=>{E.value=[...E.value.slice(0,o),...E.value.slice(o+1)]}}),we=r=>{const o=me(),u=O(),k=he(),i=Q(0),g=F(()=>i.value>0),h=ve([]);return pe(()=>{const{search:A,terminate:v}=de(),B=ye(d=>{const D=d.join(" "),{searchFilter:p=a=>a,splitWord:L,suggestionsFilter:l,...n}=o.value;D?(i.value+=1,A(d.join(" "),u.value,n).then(a=>p(a,D,u.value,k.value)).then(a=>{i.value-=1,h.value=a}).catch(a=>{console.warn(a),i.value-=1,i.value||(h.value=[])})):h.value=[]},w.searchDelay-w.suggestDelay);x([r,u],([d])=>B(d),{immediate:!0}),Ee(()=>{v()})}),{isSearching:g,results:h}};var Ae=X({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(r,{emit:o}){const u=K(),k=O(),i=ee(te),{addQueryHistory:g,queryHistory:h,removeQueryHistory:A}=Se(),{resultHistory:v,addResultHistory:B,removeResultHistory:d}=Fe(),D=se(r,"queries"),{results:p,isSearching:L}=we(D),l=ae({isQuery:!0,index:0}),n=Q(0),a=Q(0),R=F(()=>h.value.length>0||v.value.length>0),H=F(()=>p.value.length>0),T=F(()=>p.value[n.value]||null),j=()=>{const{isQuery:e,index:t}=l;t===0?(l.isQuery=!e,l.index=e?v.value.length-1:h.value.length-1):l.index=t-1},I=()=>{const{isQuery:e,index:t}=l;t===(e?h.value.length-1:v.value.length-1)?(l.isQuery=!e,l.index=0):l.index=t+1},J=()=>{n.value=n.value>0?n.value-1:p.value.length-1,a.value=T.value.contents.length-1},_=()=>{n.value=n.value<p.value.length-1?n.value+1:0,a.value=0},$=()=>{a.value<T.value.contents.length-1?a.value+=1:_()},Y=()=>{a.value>0?a.value-=1:J()},f=e=>e.map(t=>ge(t)?t:s(t[0],t[1])),U=e=>{if(e.type==="customField"){const t=ne[e.index]||"$content",[c,C=""]=ce(t)?t[k.value].split("$content"):t.split("$content");return e.display.map(m=>s("div",f([c,...m,C])))}return e.display.map(t=>s("div",f(t)))},S=()=>{n.value=0,a.value=0,o("updateQuery",""),o("close")},Z=()=>s("ul",{class:"search-pro-result-list"},s("li",{class:"search-pro-result-list-item"},[s("div",{class:"search-pro-result-title"},i.value.queryHistory),h.value.map((e,t)=>s("div",{class:["search-pro-result-item",{active:l.isQuery&&l.index===t}],onClick:()=>{o("updateQuery",e)}},[s(G,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},e),s("button",{class:"search-pro-remove-icon",innerHTML:M,onClick:c=>{c.preventDefault(),c.stopPropagation(),A(t)}})]))])),W=()=>s("ul",{class:"search-pro-result-list"},s("li",{class:"search-pro-result-list-item"},[s("div",{class:"search-pro-result-title"},i.value.resultHistory),v.value.map((e,t)=>s(q,{to:e.link,class:["search-pro-result-item",{active:!l.isQuery&&l.index===t}],onClick:()=>{S()}},()=>[s(G,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},[e.header?s("div",{class:"content-header"},e.header):null,s("div",e.display.map(c=>f(c)).flat())]),s("button",{class:"search-pro-remove-icon",innerHTML:M,onClick:c=>{c.preventDefault(),c.stopPropagation(),d(t)}})]))]));return re("keydown",e=>{if(r.isFocusing){if(H.value){if(e.key==="ArrowUp")Y();else if(e.key==="ArrowDown")$();else if(e.key==="Enter"){const t=T.value.contents[a.value];g(r.queries.join(" ")),B(t),u.push(b(t)),S()}}else if(e.key==="ArrowUp")j();else if(e.key==="ArrowDown")I();else if(e.key==="Enter"){const{index:t}=l;l.isQuery?(o("updateQuery",h.value[t]),e.preventDefault()):(u.push(v.value[t].link),S())}}}),x([n,a],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>s("div",{class:["search-pro-result-wrapper",{empty:r.queries.length?!H.value:!R.value}],id:"search-pro-results"},r.queries.length?L.value?s(oe,{hint:i.value.searching}):H.value?s("ul",{class:"search-pro-result-list"},p.value.map(({title:e,contents:t},c)=>{const C=n.value===c;return s("li",{class:["search-pro-result-list-item",{active:C}]},[s("div",{class:"search-pro-result-title"},e||i.value.defaultTitle),t.map((m,z)=>{const N=C&&a.value===z;return s(q,{to:b(m),class:["search-pro-result-item",{active:N,"aria-selected":N}],onClick:()=>{g(r.queries.join(" ")),B(m),S()}},()=>[m.type==="text"?null:s(m.type==="title"?le:m.type==="heading"?ue:ie,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},[m.type==="text"&&m.header?s("div",{class:"content-header"},m.header):null,s("div",U(m))])])})])})):i.value.emptyResult:R.value?[Z(),W()]:i.value.emptyHistory)}});export{Ae as default};
